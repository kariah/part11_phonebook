{"version":3,"sources":["services/persons.js","components/PersonForm.js","components/Filter.js","components/Persons.js","components/Notification.js","App.js","reportWebVitals.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","error","remove","delete","status","PersonForm","props","showAll","setPersons","setShowAll","setInfoMessage","setErrorMessage","useState","person","name","number","newPerson","setNewPerson","handlePersonChange","event","target","value","onSubmit","preventDefault","dialogResult","personFound","undefined","find","window","confirm","p","changedPerson","console","log","personService","returnedPerson","map","setTimeout","info","catch","filter","updateNumber","personObject","length","concat","onChange","type","Filter","filterValue","filteredPersons","toLowerCase","includes","Persons","onClick","filtered","Notification","infoMessage","errorMessage","className","App","useEffect","initialPersons","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.51a64251.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\n/*const baseUrl = 'http://localhost:3001/api/persons'*/\r\n\r\n//cuild version\r\nconst baseUrl = '/api/persons'\r\n\r\n\r\nconst getAll = () => { \r\n    const request = axios.get(baseUrl)   \r\n    return request.then(response => response.data)   \r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n} \r\n\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject) \r\n    return request\r\n        .then(response => response.data)\r\n        .error(error => error.response.data)\r\n}\r\n\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`) \r\n    return request.then(response => response.status) \r\n}\r\n\r\nconst persons = {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    remove: remove,\r\n}\r\n\r\nexport default persons","import React, { useState } from 'react'\r\nimport personService from '../services/persons'\r\n\r\n\r\nconst PersonForm = (props) => {\r\n    const persons = props.persons\r\n    const showAll = props.showAll\r\n    const setPersons = props.setPersons\r\n    const setShowAll = props.setShowAll\r\n    const setInfoMessage = props.setInfoMessage \r\n    const setErrorMessage = props.setErrorMessage\r\n\r\n    const [newPerson, setNewPerson] = useState({\r\n        person: {\r\n            id: 0,\r\n            name: \"\",\r\n            number: \"\"\r\n        }\r\n    });\r\n\r\n    const updateNumber = (id, number) => {\r\n        //console.log(\"id, number \", id, number)\r\n\r\n        const person = persons.find(p => p.id === id)\r\n        const changedPerson = { ...person, number: number } \r\n\r\n        console.log(\"changedPerson \", changedPerson)\r\n\r\n        personService\r\n            .update(id, changedPerson)\r\n            .then(returnedPerson => { \r\n\r\n                console.log(\"returnedPerson \", returnedPerson)\r\n\r\n                setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\r\n                setShowAll(showAll.map(person => person.id !== id ? person : returnedPerson))\r\n\r\n                console.log(\"setShowAll \", setShowAll)\r\n\r\n                setTimeout(() => {\r\n                    let info = `Personid ${id} was updated succesfully`\r\n                    setInfoMessage(info)\r\n                }, 1000)\r\n                setTimeout(() => {\r\n                    setInfoMessage(null)\r\n                }, 5000)\r\n\r\n            })\r\n            .catch(error => { \r\n                setErrorMessage(`Person '${person.name}' was already deleted from server`)\r\n                setTimeout(() => {\r\n                    setErrorMessage(null)\r\n                }, 5000)\r\n                setPersons(persons.filter(p => p.id !== id)) \r\n            })\r\n    }\r\n\r\n\r\n    const addPerson = (event) => {\r\n        event.preventDefault()\r\n\r\n        let personFound = null\r\n        let dialogResult\r\n\r\n        if (newPerson.person.name !== undefined) {\r\n            /* personFound = (persons.find(person => person.name === newPerson.person.name) ? true : false)*/\r\n            personFound = (persons.find(person => person.name === newPerson.person.name))\r\n\r\n            if (personFound != null) {\r\n                dialogResult = window.confirm(`${newPerson.person.name} is already added to phonebook, replace the old number with new one`);\r\n            }\r\n        }\r\n\r\n        //console.log(\"personFound \", personFound)\r\n\r\n        if (personFound != null) {\r\n            if (dialogResult === true) { \r\n                updateNumber(personFound.id, newPerson.person.number)\r\n                return\r\n            }\r\n            else {\r\n                return\r\n            }\r\n        }\r\n\r\n        const personObject = {\r\n            name: newPerson.person.name,\r\n            number: newPerson.person.number,\r\n            id: persons.length + 1,\r\n        }\r\n\r\n\r\n      \r\n\r\n        //add to server db\r\n        personService\r\n            .create(personObject)\r\n            .then(returnedPerson => {\r\n                setPersons(persons.concat(returnedPerson))\r\n                setShowAll(persons.concat(returnedPerson))\r\n                setNewPerson({\r\n                    person: {\r\n                        id: 0,\r\n                        name: \"\",\r\n                        number: \"\"\r\n                    }\r\n                })\r\n\r\n                setTimeout(() => {\r\n                    let info = `Person ${personObject.name} was created succesfully`\r\n                    setInfoMessage(info)\r\n                }, 1000)\r\n                setTimeout(() => {\r\n                    setInfoMessage(null)\r\n                }, 5000)\r\n            })\r\n            .catch(error => { \r\n                setErrorMessage(\r\n                     //`Create person ${personObject.name} failed.`\r\n\r\n                    //n�ytet��n backendista saatu virhe  \r\n                    error.response.data.error\r\n                )\r\n                setTimeout(() => {\r\n                    setErrorMessage(null)\r\n                }, 5000)\r\n            })\r\n    }\r\n\r\n\r\n    const handlePersonChange = (event) => {\r\n        let name = newPerson.person.name\r\n        let number = newPerson.person.number\r\n\r\n        if (event.target.id === \"name\") {\r\n            name = event.target.value\r\n        }\r\n        else if (event.target.id === \"number\") {\r\n            number = event.target.value\r\n        }\r\n\r\n\r\n        setNewPerson({\r\n            ...newPerson, person: {\r\n                name: name,\r\n                number: number\r\n            }\r\n        },\r\n        )\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n            <div>\r\n                Name:\r\n                    <input\r\n                    value={newPerson.person.name}\r\n                    onChange={handlePersonChange}\r\n                    id=\"name\"\r\n                />\r\n\r\n            </div>\r\n            <div>\r\n                Number:\r\n                    <input\r\n                    value={newPerson.person.number}\r\n                    onChange={handlePersonChange}\r\n                    id=\"number\"\r\n                />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\n\r\nconst Filter = (props) => {\r\n    const persons = props.persons\r\n    const setShowAll = props.setShowAll \r\n\r\n    const filterPersons = (event) => { \r\n\r\n        let filterValue = event.target.value\r\n\r\n        if (persons !== undefined && persons.length > 0) {\r\n            const filteredPersons = persons.filter(person => person.name.toLowerCase().includes(filterValue.toLowerCase())) \r\n\r\n            if (filteredPersons.length > 0) { \r\n\r\n                setShowAll(filteredPersons)\r\n            }\r\n            else { \r\n                setShowAll([])\r\n            } \r\n        }\r\n\r\n    }\r\n \r\n\r\n    return (\r\n        <div>\r\n            Filter shown with\r\n            <input onChange={filterPersons}>\r\n            </input>\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\nimport personService from '../services/persons'\r\n\r\n\r\nconst Persons = (props) => {\r\n    const showAll = props.showAll\r\n    const persons = props.persons\r\n    const setPersons = props.setPersons\r\n    const setShowAll = props.setShowAll\r\n    const setInfoMessage = props.setInfoMessage\r\n    const setErrorMessage = props.setErrorMessage\r\n\r\n    const removePerson = (id) => { \r\n        personService\r\n            .remove(id)\r\n            .then(response => {\r\n                console.log(\"response \", response)\r\n\r\n                let filtered = showAll.filter(person => person.id !== id)\r\n                setShowAll(filtered)\r\n\r\n                filtered = persons.filter(person => person.id !== id)\r\n                setPersons(filtered)\r\n\r\n                setTimeout(() => {\r\n                    let info = `Personid ${id} was deleted succesfully`\r\n                    setInfoMessage(info)\r\n                }, 1000)\r\n                setTimeout(() => {\r\n                    setInfoMessage(null)\r\n                }, 5000)\r\n            })\r\n            .catch(error => { \r\n                setErrorMessage(\r\n                    `Personid '${id}' was already removed from server`\r\n                )\r\n                setTimeout(() => {\r\n                    setErrorMessage(null) \r\n                }, 5000)\r\n            })\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {showAll.map(person =>\r\n                <p key={person.id}>{person.name} {person.number}\r\n                    <button onClick={() =>\r\n                        window.confirm(`Delete ${person.name}?`) &&\r\n                        removePerson(person.id)}>Delete</button>\r\n                </p>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst Notification = (props) => {\r\n    const infoMessage = props.infoMessage\r\n    const errorMessage = props.errorMessage\r\n\r\n    if (infoMessage === null && errorMessage === null) {\r\n        return null\r\n    }\r\n\r\n    console.log(\"infomessage \", infoMessage)\r\n    console.log(\"errorMessage \", errorMessage)\r\n\r\n\r\n    if (infoMessage !== null) {\r\n        return (\r\n            <div className=\"info\">\r\n                {infoMessage} \r\n            </div>)\r\n    }\r\n    else if (errorMessage !== null) {\r\n        return (\r\n            <div className=\"error\">\r\n                {errorMessage} \r\n            </div>)\r\n    }\r\n}\r\n//return (\r\n//    <div className=\"error\">\r\n//        {message}\r\n//        T�m� on message\r\n//    </div>\r\n//)\r\n\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [infoMessage, setInfoMessage] = useState(null)\r\n    const [errorMessage, setErrorMessage] = useState(null) \r\n\r\n    useEffect(() => {\r\n        personService\r\n            .getAll()\r\n            .then(initialPersons => {\r\n                setPersons(initialPersons)\r\n                setShowAll(initialPersons)\r\n            })\r\n    }, [])\r\n\r\n\r\n    const [showAll, setShowAll] = useState(persons)\r\n\r\n    return (\r\n        <div>\r\n            <h1>Phonebook</h1>\r\n            <Notification infoMessage={infoMessage} errorMessage={errorMessage} />\r\n            <Filter\r\n                persons={persons}\r\n                setShowAll={setShowAll} />\r\n            <h2>Add new</h2>\r\n            <PersonForm\r\n                persons={persons}\r\n                showAll={showAll}\r\n                setPersons={setPersons}\r\n                setShowAll={setShowAll}\r\n                setInfoMessage={setInfoMessage}\r\n                setErrorMessage={setErrorMessage}\r\n            />\r\n            <h2>Numbers</h2>\r\n            <Persons\r\n                persons={persons}\r\n                showAll={showAll}\r\n                setPersons={setPersons}\r\n                setShowAll={setShowAll}\r\n                setInfoMessage={setInfoMessage}\r\n                setErrorMessage={setErrorMessage}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App\r\n\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}